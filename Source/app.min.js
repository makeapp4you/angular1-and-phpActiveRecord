var newsApp=angular.module("newsApp","ngRoute ngFileUpload userCtrl postCtrl categoryCtrl authCtrl homeCtrl".split(" "));
newsApp.config(["$routeProvider","$compileProvider",function(b,d){d.debugInfoEnabled(!1);b.when("/admin",{templateUrl:"app/views/admin/master.html",controller:"UserListCtrl"}).when("/admin/user",{templateUrl:"app/views/admin/master.html",controller:"UserListCtrl"}).when("/admin/user/page/:page",{templateUrl:"app/views/admin/master.html",controller:"UserListCtrl"}).when("/admin/user/create",{templateUrl:"app/views/admin/master.html",controller:"UserCreateCtrl"}).when("/admin/user/:id",{templateUrl:"app/views/admin/master.html",
controller:"UserUpdateCtrl"}).when("/admin/post",{templateUrl:"app/views/admin/master.html",controller:"PostListCtrl"}).when("/admin/post/page/:page",{templateUrl:"app/views/admin/master.html",controller:"PostListCtrl"}).when("/admin/post/create",{templateUrl:"app/views/admin/master.html",controller:"PostCreateCtrl"}).when("/admin/post/:id",{templateUrl:"app/views/admin/master.html",controller:"PostUpdateCtrl"}).when("/admin/category",{templateUrl:"app/views/admin/master.html",controller:"CategoryListCtrl"}).when("/admin/category/page/:page",
{templateUrl:"app/views/admin/master.html",controller:"CategoryListCtrl"}).when("/admin/category/create",{templateUrl:"app/views/admin/master.html",controller:"CategoryCreateCtrl"}).when("/admin/category/:id",{templateUrl:"app/views/admin/master.html",controller:"CategoryUpdateCtrl"}).when("/admin/login",{templateUrl:"app/views/admin/master.html",controller:"AuthLoginCtrl"}).when("/",{templateUrl:"app/views/home/master.html",controller:"HomeIndexCtrl"}).when("/page/:page",{templateUrl:"app/views/home/master.html",
controller:"HomeIndexCtrl"}).when("/show/:id/:any",{templateUrl:"app/views/home/master.html",controller:"HomeShowCtrl"}).when("/category/:id",{templateUrl:"app/views/home/master.html",controller:"HomeCategoryCtrl"}).when("/category/:id/page/:page",{templateUrl:"app/views/home/master.html",controller:"HomeCategoryCtrl"}).otherwise({redirectTo:"/"})}]);
newsApp.run(["$rootScope","$location",function(b,d){b.link=function(b){return"#/"+b};b.searchResults="";b.searchText=function(a){b.searchResults=a};b.orderBy=!1;b.reverseData=!1;b.reverse=function(a){b.reverseData=!b.reverseData;b.orderBy=a};b.isBackend=!1;b.isBackendFunc=function(a){!0===/^\/admin.*$/.test(a)?b.isBackend=!0:b.isBackend=!1;return b.isBackend};b.$on("$routeChangeStart",function(a){a=d.path();b.isBackendFunc(a)})}]);var authCtrl=angular.module("authCtrl",[]);
authCtrl.run(["$rootScope","$location","User",function(b,d,a){b.isLogin=!1;b.$on("$routeChangeStart",function(){!0!==/^\/admin.*$/.test(d.path())||"/admin/login"==d.path()||b.isLogin||a.isLogin(function(a){b.isLogin=a&&a.isLogin?!0:!1;a&&!a.isLogin&&"/admin/login"!=d.path()&&(b.errors=a&&a.errors,d.path("admin/login"));a&&a.isLogin&&"/admin/login"==d.path()&&d.path("admin")})});b.logout=function(){a.logout(function(a){b.toggleActive=!1;b.isLogin=!1;d.path("admin/login")})};b.toggleActive=d.path();
b.selectedTab=function(e){a.isLogin(function(a){b.isLogin=a&&a.isLogin;b.isLogin||"/admin/login"==d.path()?b.isLogin?(b.toggleActive=e,d.path(e)):a&&a.errors&&(b.errors=a.errors):d.path("/admin/login")})}}]);
authCtrl.controller("AuthLoginCtrl",["$scope","$rootScope","$location","Custom","User",function(b,d,a,e,c){b.login=function(b){b=angular.copy(b);c.login({email:b.email,password:b.password},function(b){d.errors=b&&b.errors;d.isLogin=b&&b.isLogin;d.isLogin&&(d.errors=[],a.path("/admin"))})};e.setTitle("\u0110\u0103ng nh\u1eadp");e.setPath("login")}]);var categoryCtrl=angular.module("categoryCtrl",[]);
categoryCtrl.controller("CategoryListCtrl",["$scope","$routeParams","Custom","Category",function(b,d,a,e){b.page=d.page?d.page:1;b.messages=a.getFlashMessages();e.all(function(f){var c=f&&f.categories&&f.categories.data;f=f&&f.categories&&f.categories.pagination&&f.categories.pagination.render;c&&(b.categories=c);f&&(b.pagination=a.getRender(f))},b.page);var c;b.openModal=function(b){c=angular.copy(b);jQuery(".modal").modal("toggle")};b["delete"]=function(){if(c){var a=c.id;c=void 0;jQuery(".modal").modal("toggle");
e["delete"](a,function(a){b.errors=a&&a.errors;b.messages=a&&a.messages;b.messages&&b.messages.length&&(b.categories.splice(b.categories.indexOf(c),1),e.all(function(a){if(a=a&&a.categories&&a.categories.data)b.categories=a},b.page))})}};a.setTitle("Danh s\u00e1ch chuy\u00ean m\u1ee5c");a.setPath("categories/list")}]);
categoryCtrl.controller("CategoryCreateCtrl",["$scope","$location","Custom","Category",function(b,d,a,e){b.input={level:"2"};b.create=function(c){c=angular.copy(c)||{};e.create({name:c.name,order:c.order},function(c){b.errors=c&&c.errors;b.messages=c&&c.messages;b.messages&&b.messages.length&&(a.setFlashMessages(b.messages),d.path("admin/category"))})};a.setTitle("T\u1ea1o chuy\u00ean m\u1ee5c");a.setPath("categories/create")}]);
categoryCtrl.controller("CategoryUpdateCtrl",["$scope","$location","$routeParams","Custom","Category",function(b,d,a,e,c){b.id=a.id;c.get(b.id,function(a){a&&a.category&&(b.input=a.category)});b.update=function(a){a=angular.copy(a)||{};c.update(b.id,{name:a.name,order:a.order},function(a){b.errors=a&&a.errors;b.messages=a&&a.messages;b.messages&&b.messages.length&&(e.setFlashMessages(b.messages),d.path("admin/category"))})};e.setTitle("Ch\u1ec9nh s\u1eeda chuy\u00ean m\u1ee5c");e.setPath("categories/show")}]);
var homeCtrl=angular.module("homeCtrl",[]);homeCtrl.run(["$rootScope","Home",function(b,d){d.getCategories(function(a){b.categories=a&&a.categories&&a.categories.data})}]);homeCtrl.controller("HomeIndexCtrl",["$scope","$routeParams","Custom","Home",function(b,d,a,e){b.page=d.page?d.page:1;e.getPosts(function(c){var e=c&&c.posts&&c.posts.data;c=c&&c.posts&&c.posts.pagination&&c.posts.pagination.render;e&&(b.posts=e);c&&(b.pagination=a.getRender(c))},b.page);a.setTitle("Trang ch\u1ee7");a.setPath("index")}]);
homeCtrl.controller("HomeShowCtrl",["$scope","$routeParams","Custom","Home",function(b,d,a,e){b.id=d.id?d.id:1;e.showPost(b.id,function(c){b.post=c&&c.post;b.post.intro=a.getRender(b.post.intro);b.post.content=a.getRender(b.post.content);a.setTitle(b.post.title)});a.setTitle("Chi ti\u1ebft");a.setPath("show")}]);
homeCtrl.controller("HomeCategoryCtrl",["$scope","$routeParams","Custom","Home",function(b,d,a,e){b.page=d.page?d.page:1;b.id=d.id?d.id:1;e.getPostsByCategory(b.id,function(c){var e=c&&c.posts&&c.posts.data;c=c&&c.posts&&c.posts.pagination&&c.posts.pagination.render;e&&(b.posts=e,e[0].category&&a.setTitle(e[0].category));c&&(b.pagination=a.getRender(c))},b.page);a.setTitle("Chuy\u00ean m\u1ee5c");a.setPath("category")}]);var postCtrl=angular.module("postCtrl",[]);
postCtrl.controller("PostListCtrl",["$scope","$routeParams","Custom","Post",function(b,d,a,e){b.page=d.page?d.page:1;b.messages=a.getFlashMessages();e.all(function(c){var e=c&&c.posts&&c.posts.data;c=c&&c.posts&&c.posts.pagination&&c.posts.pagination.render;e&&(b.posts=e);c&&(b.pagination=a.getRender(c))},b.page);var c;b.openModal=function(b){c=angular.copy(b);jQuery(".modal").modal("toggle")};b["delete"]=function(){if(c){var a=c.id;c=void 0;jQuery(".modal").modal("toggle");e["delete"](a,function(a){b.errors=
a&&a.errors;b.messages=a&&a.messages;b.messages&&b.messages.length&&(b.posts.splice(b.posts.indexOf(c),1),e.all(function(a){if(a=a&&a.posts&&a.posts.data)b.posts=a},b.page))})}};a.setTitle("Danh s\u00e1ch b\u00e0i vi\u1ebft");a.setPath("posts/list")}]);
postCtrl.controller("PostCreateCtrl",["$scope","$location","Custom","Post","Upload",function(b,d,a,e,c){e.creator(function(a){if(a=a&&a.categories&&a.categories.data)b.categories=a});b.create=function(c){var g=(c=angular.copy(c)||{},c.category)&&c.category.id,h=tinymce.activeEditor.getContent();e.create({title:c.title,intro:c.intro,content:h,category_id:g},function(c){b.errors=c&&c.errors;b.messages=c&&c.messages;b.messages&&b.messages.length&&(a.setFlashMessages(b.messages),d.path("admin/post"))})};
b.upload=function(a){b.progress=0;b.fileName="";c.upload({url:"http://angular.qhonline.edu.vn/api/upload",file:a}).progress(function(a){b.progress=parseInt(100*a.loaded/a.total)}).success(function(a){var c=a&&a.errors;c&&c.length?(b.fileError=!0,b.fileTemp=!1):(b.fileError=!1,b.fileName=a&&a.file&&a.file.name,b.fileTemp=a&&a.file&&a.file.temp)})};a.setTitle("T\u1ea1o b\u00e0i vi\u1ebft");a.setPath("posts/create")}]);
postCtrl.controller("PostUpdateCtrl",["$scope","$location","$routeParams","Custom","Post","Upload",function(b,d,a,e,c,f){b.id=a.id;c.get(b.id,function(a){a&&a.post&&a.categories&&(b.input=a.post,b.input.category={id:a.post.category_id},b.categories=a.categories.data)});b.loadTinyMCE=function(){tinymce&&setTimeout(function(){tinymce.activeEditor.setContent(b.input.content)},100)};b.update=function(a){var f=(a=angular.copy(a)||{},a.category)&&a.category.id,k=tinymce.activeEditor.getContent();c.update(b.id,
{title:a.title,intro:a.intro,content:k,category_id:f,image:b.input&&b.input.image},function(a){b.errors=a&&a.errors;b.messages=a&&a.messages;b.messages&&b.messages.length&&(e.setFlashMessages(b.messages),d.path("admin/post"))})};b.upload=function(a){b.progress=0;b.fileName="";f.upload({url:"http://angular.qhonline.edu.vn/api/upload",file:a}).progress(function(a){b.progress=parseInt(100*a.loaded/a.total)}).success(function(a){var c=a&&a.errors;c&&c.length?(b.fileError=!0,b.fileTemp=!1):(b.input.image=a&&a.file&&a.file.hash,b.fileError=
!1,b.fileName=a&&a.file&&a.file.name,b.fileTemp=a&&a.file&&a.file.temp)})};e.setTitle("Ch\u1ec9nh s\u1eeda b\u00e0i vi\u1ebft");e.setPath("posts/show")}]);var userCtrl=angular.module("userCtrl",[]);
userCtrl.controller("UserListCtrl",["$scope","$routeParams","Custom","User",function(b,d,a,e){b.page=d.page?d.page:1;b.messages=a.getFlashMessages();e.all(function(c){var e=c&&c.users&&c.users.data;c=c&&c.users&&c.users.pagination&&c.users.pagination.render;e&&(b.users=e);c&&(b.pagination=a.getRender(c))},b.page);b.getLevel=function(a){switch(a){case 1:return"Administrator";case 2:return"Member";default:return"Unknown"}};var c;b.openModal=function(a){c=angular.copy(a);jQuery(".modal").modal("toggle")};
b["delete"]=function(){if(c){var a=c.id;c=void 0;jQuery(".modal").modal("toggle");e["delete"](a,function(a){b.errors=a&&a.errors;b.messages=a&&a.messages;b.messages&&b.messages.length&&(b.users.splice(b.users.indexOf(c),1),e.all(function(a){if(a=a&&a.users&&a.users.data)b.users=a},b.page))})}};a.setTitle("Danh s\u00e1ch ng\u01b0\u1eddi d\u00f9ng");a.setPath("users/list")}]);
userCtrl.controller("UserCreateCtrl",["$scope","$location","Custom","User",function(b,d,a,e){b.input={level:"2"};b.create=function(c){c=angular.copy(c)||{};e.create({email:c.email,password:c.password,confirm_password:c.confirm_password,level:c.level},function(c){b.errors=c&&c.errors;b.messages=c&&c.messages;b.messages&&b.messages.length&&(a.setFlashMessages(b.messages),d.path("admin/user"))})};a.setTitle("T\u1ea1o ng\u01b0\u1eddi d\u00f9ng");a.setPath("users/create")}]);
userCtrl.controller("UserUpdateCtrl",["$scope","$location","$routeParams","Custom","User",function(b,d,a,e,c){b.id=a.id;b.input={level:"2"};c.get(b.id,function(a){a&&a.user&&(b.input=a.user)});b.update=function(a){a=angular.copy(a)||{};c.update(b.id,{email:a.email,password:a.password,confirm_password:a.confirm_password,level:a.level},function(a){b.errors=a&&a.errors;b.messages=a&&a.messages;b.messages&&b.messages.length&&(e.setFlashMessages(b.messages),d.path("admin/user"))})};e.setTitle("Ch\u1ec9nh s\u1eeda ng\u01b0\u1eddi d\u00f9ng");
e.setPath("users/show")}]);
newsApp.factory("Category",["$rootScope","$http",function(b,d){this.all=function(a,b){d.get("http://angular.qhonline.edu.vn/api/category?page="+b).then(function(b){a(b.data)})};this.create=function(a,b){d.post("http://angular.qhonline.edu.vn/api/category/create",a).then(function(a){b(a.data)})};this.get=function(a,b){d.get("http://angular.qhonline.edu.vn/api/category/"+a).then(function(a){b(a.data)})};this.update=function(a,b,c){d.put("http://angular.qhonline.edu.vn/api/category/"+a,b).then(function(a){c(a.data)})};this["delete"]=function(a,b){d["delete"]("http://angular.qhonline.edu.vn/api/category/"+a).then(function(a){b(a.data)})};return this}]);
newsApp.factory("Custom",["$rootScope","$sce",function(b,d){this.setPath=function(a){b.path=a};this.getPath=function(){return b.path};this.setTitle=function(a){b.pageTitle=a};this.getTitle=function(){return b.pageTitle};var a="";this.setFlashMessages=function(b){b&&(a=b)};this.getFlashMessages=function(){var b=a;a="";return b?b:""};this.getRender=function(a){return d.trustAsHtml(a)};return this}]);
newsApp.factory("Home",["$rootScope","$http",function(b,d){this.getPosts=function(a,b){d.get("http://angular.qhonline.edu.vn/api/home?page="+b).then(function(b){a(b.data)})};this.getCategories=function(a){d.get("http://angular.qhonline.edu.vn/api/home/category/get").then(function(b){a(b.data)})};this.getPostsByCategory=function(a,b,c){d.get("http://angular.qhonline.edu.vn/api/home/category/"+a+"?page="+c).then(function(a){b(a.data)})};this.showPost=function(a,b){d.get("http://angular.qhonline.edu.vn/api/home/"+a).then(function(a){b(a.data)})};return this}]);
newsApp.factory("Post",["$rootScope","$http",function(b,d){this.all=function(a,b){d.get("http://angular.qhonline.edu.vn/api/post?page="+b).then(function(b){a(b.data)})};this.create=function(a,b){d.post("http://angular.qhonline.edu.vn/api/post/create",a).then(function(a){b(a.data)})};this.creator=function(a){d.get("http://angular.qhonline.edu.vn/api/post/creator").then(function(b){a(b.data)})};this.get=function(a,b){d.get("http://angular.qhonline.edu.vn/api/post/"+a).then(function(a){b(a.data)})};this.update=function(a,b,c){d.put("http://angular.qhonline.edu.vn/api/post/"+a,b).then(function(a){c(a.data)})};this["delete"]=function(a,b){d["delete"]("http://angular.qhonline.edu.vn/api/post/"+
a).then(function(a){b(a.data)})};return this}]);
newsApp.factory("User",["$rootScope","$http",function(b,d){this.login=function(a,b){d.post("http://angular.qhonline.edu.vn/api/login",a).then(function(a){b(a.data)})};this.logout=function(a){d.get("http://angular.qhonline.edu.vn/api/logout").then(function(b){a(b.data)})};this.isLogin=function(a){d.get("http://angular.qhonline.edu.vn/api/isLogin").then(function(b){a(b.data)})};this.all=function(a,b){d.get("http://angular.qhonline.edu.vn/api/user?page="+b).then(function(b){a(b.data)})};this.create=function(a,b){d.post("http://angular.qhonline.edu.vn/api/user/create",a).then(function(a){b(a.data)})};this.get=function(a,b){d.get("http://angular.qhonline.edu.vn/api/user/"+a).then(function(a){b(a.data)})};
this.update=function(a,b,c){d.put("http://angular.qhonline.edu.vn/api/user/"+a,b).then(function(a){c(a.data)})};this["delete"]=function(a,b){d["delete"]("http://angular.qhonline.edu.vn/api/user/"+a).then(function(a){b(a.data)})};return this}]);
newsApp.directive("tinymce",["$q",function(b){return{restrict:"A",scope:{lazyLoad:"@",callback:"&",selector:"@"},transclude:!0,template:"<div ng-transclude></div>",link:function(d,a,e){(function(){var a,e=b.defer();setTimeout(function(){e.notify("Chu\u1ea9n b\u1ecb load TinyMCE");var b=document.createElement("script");b.type="text/javascript";b.src=d.lazyLoad;document.getElementsByTagName("head")[0].appendChild(b);e.notify("Ch\u1edd load TinyMCE");a=setInterval(function(){"undefined"!==typeof window.tinymce&&
(tinymce.remove(d.selector),tinymce.init({selector:d.selector}),e.resolve("Load TinyMCE th\u00e0nh c\u00f4ng"),clearInterval(a))},100)},0);return e.promise})().then(function(a){"function"===typeof d.callback&&d.callback()},!1,function(a){})}}}]);